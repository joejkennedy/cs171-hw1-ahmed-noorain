<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CS171 Homework 1</title>

  <style type="text/css">
  /* YOUR CSS */
  </style>
</head>
<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script>
  d3.tsv("unemp_states_us_nov_2013.tsv", function(error, data){

      var table = d3.select("body").append("table"),
      tbody = table.append("tbody");


      var rows = tbody.selectAll("tr")
      .data(data)
      .enter()
      .append("tr");
	  //.style("background-color",function(d,i) { console.log(i); return color(i); })
	
	//console.log(data);
	//console.log((d3.selectAll("tbody tr")));
	
	
	var color = d3.scale.linear()
	.domain([3.6,20.6])
	 // .domain([0, d3.selectAll("tbody tr")[0].length-1])
	  .interpolate(d3.interpolateRgb)
	  .range(["orangered", "silver"]);
	
	
	
	 	/*
	 	tbody.selectAll("tr").style("background-color", function(d,i) { 
	     return color(i)});
		*/
  	 	tbody.selectAll("tr").style("background-color", function(d,i) { 
	     return d3.selectAll("tr").selectAll("td").style("background-color",color(i))});


      var cells = rows.selectAll("td")
      .data(function(row) {
        return d3.range(Object.keys(row).length).map(function(column, i) {
          return row[Object.keys(row)[i]];
          });
        })
      .enter()
      .append("td")
      .text(function(d) { return d; })
	  //.style("background-color", function(d,i) { 
	    // return color(i)
	 	//})
	
	var td = d3.selectAll("tbody tr").selectAll("td");
	td.style("color", function(d, i) { return i ? null : "red"; });
	
      });


  </script>
</body>
</html>
